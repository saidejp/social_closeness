---
title: "Nice guys or potential cooperators when keeping promises: an experimental and Bayesian account for two explanations"
author: "Said JimÃ©nez"
date: "July 2019"
output: 
  pdf_document:
    number_sections: true
fontsize: 12pt
bibliography: promises.bib
csl: apa.csl
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=FALSE, fig.align='center', dev='png', dpi=400, out.width='80%')
load("~/Google Drive/PromesaConducta_8to2/data/promesas_analisis/Analisis-Comportamiento/promesas_analisis/data.RData")
pacman::p_load(tidyverse, kableExtra)

```

# Introduction


Human beings are social animals and we get advantages from being so. Historically, belonging to a social group has provided protection and guaranteed access to resources such as food, currently there has been evidence that belonging to a social circle has a positive effect on longevity, physical and mental health [@Tough2017; @Holt-Lunstad2018]. The interrelation between social closeness and cooperation is key to the formation of large groups of individuals without a genetic relationship, such groups form the basis of communities, societies, and nations, as well as probably constitute one of the most fundamental conditions for human survival [@Fehr2003; @Fehr2018].

An important requirement for cooperation between individuals is communication, a meta-analysis of 45 studies reported a large positive effect ($d =  1.01$) of communication in cooperation regardless of the communication medium [@Balliet2010]. In parallel, it is known that after communication sessions between completely unknown individuals there is an increase in subjective social closeness [@Aron1997]. Thus, the findings suggest a positive relationship between communication, cooperation, and social closeness.

One of the forms of communication that have received the most attention in psychological game theory is the promises, in an interaction between the sender and the recipient, it is believed that promises influence beliefs of the recipient, generating trust and cooperation [@Charness2006; @Vanberg2008]. However, there are situations where trust is betrayed, promises are broken or people deceive, for example, approximately 11% of people surveyed by the General Social Survey (GSS) in 2018 responded that they have had sex with someone different to their partner while they are married [@GSS2018]. Another example, according to the Washington Post, President Trump has said 10,796 false or misleading statements in 869 days in office [@Kessler2019].

In the laboratory, these transgressions to trust have been explicitly studied in experiments where subjects have incentives to lie or not keep their promises. However, the vast majority of these studies in economics, psychology and neurosciences have been conducted in people who do NOT know each other [to name a few, @Gneezy2005; @Gneezy2013; @Baumgartner2009; @Baumgartner2013; @Charness2006; @Mazar2008; @Fischbacher2013a]. In social psychology some studies address deception in close interpersonal relationships, however, they use self-report measurements [@DePaulo1998; @DePaulo2004] or rather explore the development of deception detection skills in same-sex friends [@Anderson2002]. Despite the widespread presence of interactions between human beings belonging to the same group, it is not known how social closeness between subjects can affect keeping or breaking promises.

In this manuscript, we explore the effects of three partners with different levels of social closeness on keeping or breaking promises, as well as on cooperation in a trust game. The above, we analyze it in the light of the two main motivations that have been pointed out in the literature regarding keeping promises [@Baumgartner2009]:

1. The _instrumental_ suggests that promises are kept to make future cooperation easier.

2. The _intrinsic_ mentions that the promises are kept to do what is morally right.

In our study, subjects perform a standard trust game in pairs with three phases: _first_, the trustee makes a promise to pay half of his earnings regardless of who his investor is; _second_, the investor receives the promise and decides if he invests his initial budget; _third_, in case the investor has given the budget, the trustee faces the decision to pay or not to pay half of his earnings. To evaluate the effect of social closeness, our subjects participate in the role of trustee in front of three partners with different levels of social closeness (zero, low and high) in the role of the investor: a _computer_, a _stranger_, and a _friend_.

The manipulations mentioned allow us to evaluate several hypotheses, the first one was proposed a priori and is derived from a larger research project (you can check the pre-registration of the hypothesis here: https://osf.io/u97fd), while the following are exploratory:

1. Social closeness will reduce the decision of breaking the promise. According to the _instrumental_ motivation, we expect that subjects keep their promises with friends for the purpose of facilitating future cooperation, which can be extended even beyond the trials in the experiment. We also expect, although to a lesser extent, that the subjects keep promises to strangers, with the purpose of facilitating cooperation at least during the trials during the experiment. Finally, we anticipate that the participants break the promises to the computer because it is a partner without social closeness and they could not ensure cooperation in future trials. It should be noted that if the participants keep the promises to the computer, evidence would be given in favor of intrinsic motivation.

2. There will be an effect of social closeness on cooperation, regardless of promises. We expect that there is more probability of paying the _ friend_ than the _ stranger_ and more probability of paying the stranger than the _computer_. According to the _instrumental_ motivation, the cooperation will be greater for partners with whom the subject anticipates greater cooperation in the future (friend> stranger> computer).

3. Finally, we will obtain two subsamples according to the cooperation rate of the subjects as was done in another study [@Baumgartner2009]. However, what in the aforementioned study was classified as a group of _honest_ and _dishonest_, we will show that in our sample it is not supported because if the groups differ in their payment rate it will be due to the difference in their level of commitment expressed in the promises. 

# Methods

## Subjects

We included 45 subjects (15 men), recruited from the National Autonomous University of Mexico, the age range from 19 to 33 years and their minimum educational level were bachelor's degrees. Subjects went to the study with a friend considered _close_ by themselves, who fulfilled the following characteristics: he was matched by sex, did not have a family bond and was not a person with a sentimental or sexual relationship. 30 subjects (15 men) performed the task within a Magnetic Resonance Imaging (MRI) scanner, however, their image data is not analyzed in the present work.

## Task

All subjects performed an adaptation of the trust game with promises, using hypothetical monetary rewards [@Baumgartner2009]. The task was programmed in PsychoPy2 version 1.84.2 [@Peirce2019; @Peirce2008] and consisted of 24 trials between two players: trustee and investor. The trustee originally has 0 Mexican pesos and the investor has 2 pesos, the investor is presented with the opportunity to give his money to the trustee or keep it. If he invests his money it is multiplied by 5 pesos, so that the trustee has 10 pesos. Finally, the trustee decides to pay half to the investor or keep the 10 pesos.

The structure described is repeated in 24 trials, however, in 4 of the trials the trustee can send a promise to the investor, the promises were that _always_, _mostly_, _sometimes_,  or _never_ would pay back. Each promise was valid for three trials so that 12 of the trials have the effect of the promise and the other 12 do not. It is worth mentioning that the promises are not made to a particular partner, but the subject expresses their level of commitment to pay back regardless of who their partners are in the next three trials in which the promise is valid.

The variation with respect to the original task is that in our experiment three partners were presented with three levels of social closeness in the role of the investor: *computer* (no closeness), *strange* (low closeness) and *friend* (high closeness), while the subject acts as the trustee. Each partner performs the role of investor in 8 of 24 total trials, however, both the promises and social closeness conditions were presented to the trustee in pseudorandom order.

Since our main interest was the trustee's behavior, investors' decisions were programmed _a priori_ to give their amount in 6 trials and in 2 did not. The covert story for all our subjects was that they would be playing in real-time with their friend, the stranger (was told he would be another same-sex unknown person) and the computer. A diagram of the chronology of the experimental task with the duration of each phase in seconds is shown in Figure 1, each box from left to right represents a screen that was shown to the subjects sequentially. Section A$_1$ corresponds to an example of trials without promises and section A$_2$ to trials with promises.

Fixation phase consisted only of a period in which the subject paid attention without performing any particular behavior, then, **promises phase** in part A$_1$ indicated to the subject that the following three trials they could decide without the effect of the promise, while in A$_2$  the subject was asked to decide between _always_, _mostly_, _sometimes_ or _never_ pay back. This was followed by another fixation period, subsequently, trails in both A$_1$ and A$_2$ continue in the same way.

In the **anticipation/assignment phase**, subjects were told who their partner was for that trial (computer, stranger or friend) and was given the message that their partner was making their decision. Later in the **decision phase**, the subject was informed if his partner invested his $2 or not, he was reminded of his promise level (if they were trails with promises) and, in case of his partner had invested, he was asked to decide whether to pay back or not. Finally, in **feedback phase** payments for that trial were shown and the sequence was repeated.


```{r figA, fig.cap='Trust game with promises'}

knitr::include_graphics("/Users/saidjimenez/Documents/R/github_Said/social_closeness/Manuscript/figures/task.png")

```

## Procedure

Subjects came with a same-sex friend considered close by him or her, it was emphasized that they must not have a romantic or family relationship with their friends, to try to exclude the effect on cooperation due to a consanguineous relationship or sexual attraction. Also, to ensure that the subjects and their companions had a similar degree of social closeness to each other, in the laboratory both responded to the "Inclusion of the Other in Self" IOS scale [@Aron1997] without observing their partner responses. The scale consists of seven pairs of circles that vary in the degree of overlap between them, the respondent must select the pair of circles that best represents the subjective closeness to his partner.

Subjects were trained in the task by two of the researchers, the game was first explained verbally, and then the computerized interface was presented to them on a portable computer. They were told that they would make their decisions with four buttons on the computer keyboard, which corresponded to the levels of promises and with only two of these to make their decision to pay back or not. Friends heard the explanation, they were told that they would make their decisions in a separate room on another computer. Subjects performed between 3 and 6 practice tests together with the researcher who exemplified the course of the game when the investor gave his budget. In the practice trials, all the phases indicated in Figure 1 were shown, however, the identity of the investors was replaced by question marks.

When the subjects did not report doubts we proceeded to take them without their companions to another room where they would make their decisions on a laptop, or, with the Lumina Cedrus response system in the case that it was a subject to which we also performed MRI. The subjects began the task believing that they would really play with the three partners of different social closeness. In the other room, another of the researchers performed the _debriefing_ to the companion, they were told that the purpose of the research was to know if their mere presence had an effect on the subject's decisions, but that to simplify the analysis their responses were programmed _a priori_ so your participation ended there.

When the subject finished the task, _debriefing_ was also carried out, he was told that the decisions of his partners had been programmed. Although no participant exercised their right, both subjects and their friends were told that they could withdraw their participation and informed consent if they considered disagreeing with any of the manipulations made by researchers.

# Results

## Descriptives

We analyzed 810 decisions about paying back or not (18 per subject), as well as 180 promises (4 per subject), 69% of the decisions,  were pay back, while the proportion of the promises selected were 5.4%, 16.2% 43.8%, 40.2%, respectively for promises _never_, _sometimes_, _mostly_ and _always_. Figure 2 shows the payment proportion depending on the levels of promises and partners. 

Breaking promises, that is, that the subject had promised _always_ and subsequently decides not to pay back occurred only 12.4% of trials (19 times they did not pay back of 153 when promised _always_), of which, 8.50% (13/153) were trials with the computer, 3.92% (6/153) with the stranger and 0% (0/153) with the friend. It is essential to note that breaking the promise was not the most frequent decision, in 91.5% of trials when they promised _always_ and had the computer as a partner they decided to pay back.



```{r fig2, fig.cap='Pay back proportion by partners and promises levels'}

p2 + theme(text = element_text(size = 10),
            axis.text.x = element_text(size = 8))

```



## Hierarchical Bayesian Modeling

All models presented below were programmed in R via the **brms** package [@Burkner2017; @R2019], which performs the inference using sampling by Markov chain Monte Carlo through **Stan** [@Rstan2018]. For each model, the posteriors distributions of all parameters were approximated with four chains of 2000 iterations each, the first 1000 iterations of each chain were discarded (burning period), for a total of 4000 post-burning samples. Models convergence was evaluated through visual inspection of the chains and calculation of the $\hat{R}$ statistic, which for all parameters was 1, which is interpreted as convergence. Vaguely informative prior distributions were used for the parameters of interest in the models, which allows the data to dominate the inference, also assumes as little as possible regarding the nature of the phenomenon, which could be adequate for the current state of evidence in the problem we are studying [@McElreath2018].


### Social closeness between partners

To assess social closeness, 30 (15 men) of our subjects and their friends responded to the IOS scale [@Aron1997; @Fareri2014; @Sip2015], which consist of seven pairs of circles that vary in the degree of overlap and represent the social closeness that an individual perceives with respect to the other. A Hierarchical and Cumulative Bayesian Model (See section: Commitment expressed in the promises), supports the hypothesis that there are no differences in subjective social closeness between subjects and their friends, with a posterior evidence ratio of 2.74 in its favor.


### Effect of social closeness on breaking promises

To evaluate the hypothesis that social closeness would reduce the behavior of breaking the promise, we filtered all trials in which subjects promised that they would _always_ pay back and then decided not to pay. Subsequently, Bayesian inference was used to assess the effect of partners on the decision to break the promise at the individual and population level. For this purpose, a Hierarchical Bayesian Model was carried out that assumes that the uncertainty in partners effect on the decision to break the promise varies depending on each individual, however, it also assumes that these variations belong to common population distributions [@Gelman2006].

$$
\begin{aligned}
&y_i \sim \mathrm{Bernoulli}(\theta_i) \\
&\mathrm{logit(\theta_i)} = \mathbf{X}\beta  +  \mathbf{Z}u
\end{aligned}
$$


In the previous model, the decision to break the promise $y_i$ comes from a Bernoulli distribution with probability $\theta_i$, the goal of the Hierarchical Model is to predict each decision through the linear combination of the effects of each partner, transformed by its inverse link function $\mathrm{logit}$ [@Burkner2017]. In this model, $\beta$ and $u$ are coefficients at the population level and individual level respectively, while $\mathbf{X}$, $\mathbf{Z}$ are their corresponding design matrices. In this case, the population coefficients correspond to the presence of partners with no social closeness $\beta^{computer}$, low $\beta^{stranger}$ and high $\beta^{friend}$.

Figure 3 shows the posterior probability of breaking the promise depending on the partner, circles correspond to the medians of the distributions of the posterior estimates effects, the thick bar, and the thin bar correspond to the interval of 50% and 95% posterior probability. It is clear that the probability of breaking the promise decreases as social closeness increases, however, we calculate the reasons for evidence for the following hypotheses:

- There is a greater probability to break the promise to the computer than the stranger.

- There is more probability to break the promise to the stranger compared to a friend.

The evidence ratio, which is the ratio between the posterior probability of the mentioned hypotheses and their corresponding alternative hypotheses was 7.47 and 8.64 respectively in favor of the previous hypotheses. As can be seen in Figure 5 in the estimate for $\beta^{computer}$, when there is no social closeness we have a 95% posterior probability that the parameter for promise-breaking is between 4-38%, although it is a small proportion, it clearly excludes the probability that promises are not broken.

 
```{r fig3, fig.cap='Posterior probability of Promise Breaking'}
p3

```

### Effects of promises and social closeness on cooperation

To evaluate the effect of the experimental conditions on the decision to pay back, we used all trials were partners invest. Again, a Hierarchical Bayesian Model was fit, which assumes that the promises and partners have an effect that varies for each individual, however, it also assumes that these variations belong to common population distributions. The model estimates that the probability $\theta_i$ of the decision to pay back is based on the effect of the presence of promises $\beta^{promise}$, as well as partners with low $\beta^{stranger}$ and high $\beta^{friend}$ social closeness.

Figure 4 shows the posterior distributions of the $\beta$ coefficients in the logit scale, the center line represents the median of the distribution and the shaded area corresponds to the interval of 50% posterior probability. As can be seen, more than 95% of the posterior density of the population coefficients is greater than 0, which indicates strong evidence of the effect of experimental conditions on the decision to pay back, so that the presence of promises and the stranger increase clearly the probability of paying, but the presence of the friend is the condition that has the greatest effect on this behavior. Posterior distributions clearly show that the probability of cooperation increases as social closeness does.

Also, Figure 5 presents the posterior predictive distribution in contrast to the proportion of decisions to each partner during the promises phase, each panel corresponds to one of the first twelve subjects. The responses on the dotted line would indicate that the subject paid back random to that partner. Posterior predictive distribution simulates observations of the model and compares them with the actual data, it helps us to identify if the model is sufficiently close to the process that generated the data [@Schad2019; @Lee2014]. It can be seen that there is a great correspondence between the subject's responses and predictions of the model, even in cases where the model is "wrong" (for example, subject 1), the observed response is in the range of a predicted standard deviation, which gives credibility to estimates.



```{r fig4, fig.cap='Posterior estimates in logit scale'}

p4

```


```{r fig5, fig.cap='Posterior predictive over pay back rate', out.width='100%', out.height='100%'}

d_g9 %>% 
    ggplot(aes(x = treatment, y = rate, col = case)) +
    geom_hline(yintercept = 0.5, lty = 2, col = "gray") +
    geom_line(aes(group = case), show.legend = F) +
    geom_pointrange(aes(ymax = rate + pred_sd, ymin = rate - pred_sd),
                    shape = 21, fill = "white", size = 0.4) +
    scale_color_manual(values = c("#053778", "#A4CAE3")) +
    facet_wrap(~id) +
    my_theme +
    scale_y_continuous(breaks = c(0, 0.5, 1.0)) +  
    theme(axis.text.x = element_text(angle = 75, hjust = 1), 
          legend.position = "top",
          text = element_text(size = 10)) +
    labs(x = NULL, y = "Rate", col = NULL)


```


### Effects of social closeness on cooperation varying by promises

In this model, it is assumed that social closeness has an effect that varies for each level of promise, which implies that there are levels of promise that are more sensitive than others to the effect of the partners on the decision to pay back. Again, a Hierarchical Bayesian Model was made to estimate the effect of partners at the population level and the variations depending on the promise levels. Table 1 summarizes the subsequent distributions of the model coefficients in the logit scale, including point estimates, standard errors and Bayesian Credibility Intervals of 95%. An estimate similar to the previous models can be observed, with strong evidence of the effect of social closeness on the decision to pay back. Although the credibility range for the friend's effect includes 0, the evidence ratio that the effect is greater than zero is 15.81 with 94% of posterior probability.

On the other hand, Figure 6 shows the subsequent predictive distribution, compared to the payment rates of all individuals to the different partners and their variation by the level of promise. With the exception of the promise _never_, a monotonic positive effect of partners is observed at all levels of promise, however, it can be observed how the effect of social closeness varies depending on the strength of the promise, mainly for the decisions towards the computer.


```{r fig6, fig.cap='Posterior predictive over pay back rate, Social Closeness Varying effects by Promise levels'}

p6 + 
  scale_y_continuous(breaks = c(0, 0.5, 1.0)) +  
  theme(axis.text.x = element_text(size = 7))


```



```{r tabla}

tabla1 <- broom::tidy(fit) %>% 
  slice(1:3)

tabla1[, 1] <- c("Intercept", "Stranger", "Friend")

kable(tabla1, 
      digits = 3, 
      booktabs = T,
      col.names = c("Term", "Estimate", "Est.Error", "Lower", "Upper"),
      caption = c("Posterior coefficients estimates")) %>%
  add_header_above(c(" ", " " = 2, "95 % CI" = 2)) %>% 
  kable_styling(latex_options = "hold_position")

```


### Commitment expressed in promises

In the original study of promises, authors chose to divide their sample into two according to the hierarchical clustering technique with Ward's method  [@Baumgartner2009]. In this way they obtained two sets of participants that were different in their payment rates, despite the fact that they both made very high promises, for this reason, the authors named the group that paid little _dishonest_ and the group that paid a lot _honest_. In a similar exercise, in the present study we performed the hierarchical grouping technique to obtain a solution of 2 groups and we found two similar sets in $n$ that we call the group "Low" and "High" (Low = 25, High = 20), with quite different payment ratios (Low = 58%, High = 83%), and a 95% confidence interval of 20% to 32% in the difference favor of the High group.


Although it seems a similar result to that reported in that paper, we explore the pattern of promises of both groups to determine if it was possible to classify our subjects as _honest_ and _dishonest_. If we hypothesize that the commitment to pay would be reflected in the level of promises selected, a group of _dishonest_ people could generate in their partners the belief that they will pay by choosing a high level of promises (mostly or always) and, later, betraying that trust when deciding not to pay back.


In order to explore whether the groups represent populations that do not differ in the level of commitment expressed in the promises, we use a Cumulative Bayesian Model, which assumes that the levels of promises are an observed ordinal variable $Y$ that originates from the categorization of a continuous latent variable $\tilde{Y}$, for this case, _the expressed commitment to pay back_ [@Burkner2019]. The degree to which the subjects of the High group differ from the Low group, in normal standard deviations ($z$-values), on the latent scale of $\tilde{Y}$, has a point estimate of 0.95, which implies that the High group has 0.95 $z$-values greater commitment to pay back than the Low group.


The 95% Bayesian Credibility Interval indicates that the High group is between 0.40 to 1.51 $z$-values of difference from Low. So we can conclude with at least a 95% probability that people belonging to the High group expressed in their promises a greater commitment to pay back than the subjects of the Low group. If we look at Figure 7, the probability of choosing the different levels of promises varies depending on the group, the one who had the highest percentage of decisions to pay back is more likely to choose _always_ (High group), while the group that had the lowest percentage of decisions to pay back are more likely to choose _mostly_ (Low group).

According to our data, we could not justify the classification of our groups according to their honesty or dishonesty, at least not with the technique used in Baumgartner et al. (2009). Since people were quite consistent with keeping what they promised to pay.

```{r fig7, fig.cap='Promise choices by group'}

# Cumulative model
p7

```


# Discussion


# Bibliography


